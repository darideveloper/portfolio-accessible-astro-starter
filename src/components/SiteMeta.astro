---
/**
 * SiteMeta Component
 *
 * @description Component to handle site metadata and essential head elements
 */
interface Props {
  /**
   * The title of the page
   */
  title: string
  /**
   * The description of the page
   */
  description: string
  /**
   * The URL of the page (optional, defaults to current URL)
   */
  url?: string
  /**
   * The image path for social sharing
   */
  image: string
  /**
   * The author of the page
   */
  author?: string
  /**
   * Type of page ('website' or 'article')
   */
  type?: 'website' | 'article'
  /**
   * Publication date for articles
   */
  publishDate?: string
  /**
   * Keywords for the page
   */
  keywords?: string
  /**
   * Robots meta tag content
   */
  robots?: string
}

const {
  title,
  description,
  url = Astro.url.href,
  image,
  author = 'DariDeveloper',
  type = 'website',
  publishDate,
  keywords,
  robots = 'index, follow',
} = Astro.props

const subtitle = 'Smooth Software Solutions (3S)'
const siteName = 'Smooth Software Solutions'
const twitterHandle = '@DariDeveloper' // Default handle
const fullTitle = `${title} - ${subtitle}`
const imageUrl = `${Astro.site}${image}`

// JSON-LD Logic
const jsonLd =
  type === 'article'
    ? {
        '@context': 'https://schema.org',
        '@type': 'BlogPosting',
        headline: title,
        description: description,
        image: imageUrl,
        datePublished: publishDate,
        author: {
          '@type': 'Person',
          name: author,
        },
      }
    : {
        '@context': 'https://schema.org',
        '@type': 'Organization',
        name: siteName,
        url: Astro.site,
        logo: `${Astro.site}logo.png`,
        sameAs: ['https://twitter.com/darideveloper'],
      }
---

<!-- general meta -->
<meta
  name='title'
  content={fullTitle}
/>
<meta
  name='description'
  content={description}
/>
<meta
  name='author'
  content={author}
/>
{
  keywords && (
    <meta
      name='keywords'
      content={keywords}
    />
  )
}
<meta
  name='robots'
  content={robots}
/>

<!-- canonical url -->
<link
  rel='canonical'
  href={url}
/>

<!-- open graph -->
<meta
  property='og:title'
  content={fullTitle}
/>
<meta
  property='og:description'
  content={description}
/>
<meta
  property='og:type'
  content={type}
/>
<meta
  property='og:url'
  content={url}
/>
<meta
  property='og:image'
  content={imageUrl}
/>
<meta
  property='og:site_name'
  content={siteName}
/>

<!-- twitter card -->
<meta
  name='twitter:card'
  content='summary_large_image'
/>
<meta
  name='twitter:site'
  content={twitterHandle}
/>
<meta
  name='twitter:creator'
  content={twitterHandle}
/>
<meta
  name='twitter:title'
  content={fullTitle}
/>
<meta
  name='twitter:description'
  content={description}
/>
<meta
  name='twitter:image'
  content={imageUrl}
/>

<!-- json-ld -->
<script
  type='application/ld+json'
  set:html={JSON.stringify(jsonLd)}
/>

<!-- page title -->
<title>{fullTitle}</title>
